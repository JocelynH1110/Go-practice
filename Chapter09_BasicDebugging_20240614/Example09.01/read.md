# 9-1 前言    
程式錯誤可分為三類（lesson 6）：
* 語法錯誤（syntax errors）：編譯器會指出問題。
* 執行期間錯誤（runtime errors）
* 邏輯錯誤（logic error）：最難以察覺，在編譯階段無法偵測到，也不見得會傳回錯誤值。

本章要來看 Go 程式中除錯（debugging）的一些基本方法。

## 9-1-1 臭蟲的發生原因
找出臭蟲最主要辦法：在程式執行中印出除錯訊息。好觀察程式執行過程和執行結果是否合乎預期。

臭蟲出現在正式上線的程式中，原因有以下幾種：
* 到開發尾聲才做測試：最好的作法是每一個函式完成時就做「單元測試（unit tests）」，依次測試各單元串連起來的結果就稱為「漸增測試（incremental testing）。
* 改善應用程式或因應需求改變：因使用者回饋或錯誤回報抑或客戶提出新要求，而修改上線程式碼就有可能無意間引入臭蟲。
* 不切實際的開發時程：因應要求而需要在非常迫切的時限內完成程式，往往導致測試次數減少，或尚未釐清客戶要求就逕行開發。
* 未善加處理錯誤：因懶惰等原因而未妥善處理錯誤。

## 9-1-2 除錯原則
* 漸增式程式設計/經常性測試
* 撰寫單元測試
* 所有錯誤都要處理
* 做日誌紀錄（logging）：
日誌是另一種可用來判斷程式中發生什麼狀況的手法。其種類很多，常見的包括 —> trace（追蹤）、debug（除錯訊息）、info（資訊）、warn（警告）、fatal（重大錯誤）。
這些訊息通常用來紀錄成是在臭蟲出現之前的狀態，替開發者收集諸如變數值、正在執行哪塊程式碼（ex.函式名稱）、傳入函式的引數值、函式或方法的傳回值等等。

本章會用運 Go 語言標準函式庫的 log 套件來輸出自訂的日誌訊息。
log 訊息會附帶時間戳記，能讓我們理解程式時間的發生順序。
但是，系統在尖峰運作期間有可能會密集輸出日誌訊息、進而影響軟體效能，甚至拖慢程式反應。

有時不一定要用到 log 來提供除錯訊息，標準套件 fmt 就是很好用的工具了。
